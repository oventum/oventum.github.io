$(document).ready(function(){linkBtnsHtml()});var interval,Constant=function(){return this.base_url_prod="https://www.socialchamp.io",this.base_url_stage="https://socialchampdevwebapp.azurewebsites.net",this.base_url_dev="http://localhost:9000",this.hello_oauth_proxy_prod="https://www.socialchamp.io/api/auth/getRedirectUrl",this.hello_oauth_proxy_stage=this.base_url_stage+"/api/auth/getRedirectUrl",this.hello_oauth_proxy_dev=this.base_url_dev+"/api/auth/getRedirectUrl",this.linkedin_oauth_proxy_prod="https://www.socialchamp.io/api/auth/linkedin/redirectUrl",this.linkedin_oauth_proxy_stage=this.base_url_stage+"/api/auth/linkedin/redirectUrl",this.linkedin_oauth_proxy_dev=this.base_url_dev+"/api/auth/linkedin/redirectUrl",this.hotmail_oauth_key_prod="00000000441C8806",this.hotmail_oauth_key_stage="000000004C1CCE3E",this.hotmail_oauth_key_dev="000000004C1CCE3E",{base_url:this.base_url_prod,hello_oauth_proxy:this.hello_oauth_proxy_prod,linkedin_oauth_proxy:this.linkedin_oauth_proxy_prod,hotmail_oauth_key:this.hotmail_oauth_key_prod}}(),baseURL=Constant.base_url,packageSelected="",loginBtnsHtml1={twitter:{main:null,loader:null,icon:null},facebook:{main:null,loader:null,icon:null},linkedin:{main:null,loader:null,icon:null},windows:{main:null,loader:null,icon:null},google:{main:null,loader:null,icon:null}},loginBtnsHtml2={twitter:{main:null,loader:null,icon:null},facebook:{main:null,loader:null,icon:null},linkedin:{main:null,loader:null,icon:null},windows:{main:null,loader:null,icon:null},google:{main:null,loader:null,icon:null}},isLoginCall=!1;function init(){hello.init({twitter:"NTZThxU1Iqwcg86hoYPNZFfhF",facebook:"568444806641750",windows:Constant.hotmail_oauth_key,google:"399213877917-76c5qsgu1fq248nm3p27qmaeeovj4mm2.apps.googleusercontent.com"},{oauth_proxy:Constant.hello_oauth_proxy})}function loginCall(n){isLoginCall||(isLoginCall=!0,loginApi(n).done(successLogin.bind(null,!1)).fail(failLogin))}function successLogin(n,t){if(!n)return location.href=Constant.base_url+t.redirectOauthUrl;showLoginLoader(!1),isLoginCall=!1,packageSelected="",localStorage.setItem("Authorization",t.authorizationToken);var e=localStorage.getItem("user")||{};if(e=e.type?JSON.parse(e):{},localStorage.setItem("user",JSON.stringify({userId:t.userId||"",name:t.name,profileImg:t.profileImg||"",type:t.type,maxNOP:t.NOP,maxNOT:t.NOT,repeatState:e.repeatState,activeTab:e.activeTab,NOP:e&&e.NOP?e.NOP:4,NOT:e&&e.NOT?e.NOT:8,subAccounts:t.subAccounts?Array.isArray(t.subAccounts)?t.subAccounts:[t.subAccounts]:[],user_auth_type:t.user_auth_type,isTrialUsed:t.isTrialUsed||!1,subAccountsCount:t.subAccountsCount||0,isEmailPresent:t.isEmailPresent||!1,settings:t.settings||{},hasTimetable:t.hasTimetable||!1,subUserSettings:t.subUserSettings||[],tourStatus:t.tourStatus||{},userSettings:t.userSettings||{}})),t.trialInfo&&t.trialInfo.code){var o=t.trialInfo.type?t.trialInfo.type+"! "+t.trialInfo.message+". Remaining days "+t.trialInfo.remainingDays:t.trialInfo.message+". Remaining days "+t.trialInfo.remainingDays;102==t.trialInfo.code?swal({title:"Trial Info",text:o,type:"warning",showCancelButton:!1,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",cancelButtonText:"",closeOnConfirm:!0,closeOnCancel:!1},function(n){window.location.assign(baseURL+"/app")}):101==t.trialInfo.code&&swal({title:"Trial Info",text:t.trialInfo.message,type:"warning",showCancelButton:!1,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",cancelButtonText:"",closeOnConfirm:!0,closeOnCancel:!1},function(n){window.location.assign(baseURL+"/app")})}else window.location.assign(baseURL+"/app")}function failLogin(n){showLoginLoader(!1),isLoginCall=!1,packageSelected="",n.responseJSON&&101===n.responseJSON.errCode&&swal("Profile merged with another account",'This profile is managed by "'+n.responseJSON.main_user.name+'", please login from "@'+n.responseJSON.main_user.twitterHandle+'" to manage this profile',"error")}function login(n,t,e){e?ga("send","event","Login with "+n+" and package "+e,"Login","Logging in main page with trial"):ga("send","event","Login with "+n,"Login","Logging in main page");var o={};t&&(o.force=!0),"facebook"===n?o.scope="photos,publish,email":"windows"===n?o.scope="wl.signin,wl.basic,wl.emails":"google"===n&&(o.scope="basic,email"),e&&(packageSelected=e),showLoginLoader(!0,n),loginCall({type:{facebook:"FB",twitter:"TW",linkedin:"IN",windows:"HOTMAIL",google:"GOOGLE"}[n]})}function loginWithoutHello(n){isLoginCall=!0,loginApi(n).done(successLogin.bind(null,!1)).fail(failLogin)}function loginApi(n){return n.appInfo={},n.appInfo.APP_TYPE="APP",n.appInfo.BROWSER_TYPE=detectBrowser(),n.appInfo.DEVICE_TYPE=detectDevice(),packageSelected&&(n.trialType=packageSelected),$.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:baseURL+"/oauth/login",data:JSON.stringify(n)})}function openSelecter(n,t,e){n=n||"FREE";var o=!0;t&&(n="",o=!1);var i="Login with";"SIGNUP"===e&&(i="Signup with"),swal({title:i,text:'<div class="signup-sweetbox buttons" id="download-button"><a href="javascript:;" class="btn btn-default btn-lg standard-button" onclick="login(\'twitter\','+o+", '"+n+'\')"><i class="fa fa-twitter fa-lg"></i> Twitter</a><a href="javascript:;" class="btn btn-default btn-lg standard-button standard-button-fb" onclick="login(\'facebook\', '+o+", '"+n+'\')"><i class="fa fa-facebook fa-lg"></i> Facebook</a><a href="javascript:;" class="btn btn-default btn-lg standard-button standard-button-in" onclick="login(\'linkedin\', '+o+", '"+n+'\')"><i class="fa fa-linkedin fa-lg"></i> Linkedin</a><a href="javascript:;" class="btn btn-default btn-lg standard-button standard-button-in" onclick="login(\'google\', '+o+", '"+n+'\')"><i class="fa fa-google fa-lg"></i> Google</a></div>',html:!0,customClass:"signup-sweet",confirmButtonText:"Close",confirmButtonColor:"#525252"})}function linkBtnsHtml(){loginBtnsHtml1.twitter.main=document.getElementById("twLoginBtn"),loginBtnsHtml1.twitter.loader=document.getElementById("login-tw-loader-id"),loginBtnsHtml1.twitter.icon=document.getElementById("login-tw-icon-id"),loginBtnsHtml1.facebook.main=document.getElementById("fbLoginBtn"),loginBtnsHtml1.facebook.loader=document.getElementById("login-fb-loader-id"),loginBtnsHtml1.facebook.icon=document.getElementById("login-fb-icon-id"),loginBtnsHtml1.linkedin.main=document.getElementById("inLoginBtn"),loginBtnsHtml1.linkedin.loader=document.getElementById("login-in-loader-id"),loginBtnsHtml1.linkedin.icon=document.getElementById("login-in-icon-id"),loginBtnsHtml1.windows.main=document.getElementById("winLoginBtn"),loginBtnsHtml1.windows.loader=document.getElementById("login-win-loader-id"),loginBtnsHtml1.windows.icon=document.getElementById("login-win-icon-id"),loginBtnsHtml1.google.main=document.getElementById("googleLoginBtn"),loginBtnsHtml1.google.loader=document.getElementById("login-google-loader-id"),loginBtnsHtml1.google.icon=document.getElementById("login-google-icon-id"),loginBtnsHtml2.twitter.main=document.getElementById("twLoginBtn2"),loginBtnsHtml2.twitter.loader=document.getElementById("login-tw-loader-id2"),loginBtnsHtml2.twitter.icon=document.getElementById("login-tw-icon-id2"),loginBtnsHtml2.facebook.main=document.getElementById("fbLoginBtn2"),loginBtnsHtml2.facebook.loader=document.getElementById("login-fb-loader-id2"),loginBtnsHtml2.facebook.icon=document.getElementById("login-fb-icon-id2"),loginBtnsHtml2.linkedin.main=document.getElementById("inLoginBtn2"),loginBtnsHtml2.linkedin.loader=document.getElementById("login-in-loader-id2"),loginBtnsHtml2.linkedin.icon=document.getElementById("login-in-icon-id2")}function showLoginLoader(n,t){if(n){for(var e in loginBtnsHtml1)loginBtnsHtml1[e].main&&(loginBtnsHtml1[e].main.disabled=!0),t===e&&(loginBtnsHtml1[e].loader&&(loginBtnsHtml1[e].loader.style.display="inherit"),loginBtnsHtml1[e].icon&&(loginBtnsHtml1[e].icon.style.display="none"));for(var e in loginBtnsHtml2)loginBtnsHtml2[e].main&&(loginBtnsHtml2[e].main.disabled=!0),t===e&&(loginBtnsHtml2[e].loader&&(loginBtnsHtml2[e].loader.style.display="inherit"),loginBtnsHtml2[e].icon&&(loginBtnsHtml2[e].icon.style.display="none"))}else{for(var e in loginBtnsHtml1)loginBtnsHtml1[e].main&&(loginBtnsHtml1[e].main.disabled=!1),loginBtnsHtml1[e].loader&&(loginBtnsHtml1[e].loader.style.display="none"),loginBtnsHtml1[e].icon&&(loginBtnsHtml1[e].icon.style.display="inherit");for(var e in loginBtnsHtml2)loginBtnsHtml2[e].main&&(loginBtnsHtml2[e].main.disabled=!1),loginBtnsHtml2[e].loader&&(loginBtnsHtml2[e].loader.style.display="none"),loginBtnsHtml2[e].icon&&(loginBtnsHtml2[e].icon.style.display="inherit")}}function detectBrowser(){return(isFirefox="undefined"!=typeof InstallTrigger)?"FIREFOX":0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?"SAFARI":window.chrome?"CHROME":window.opr&&opr.addons||window.opera||0<=navigator.userAgent.indexOf(" OPR/")?"OPERA":""}function detectDevice(){return navigator.userAgent.match(/Android/i)?"ANDROID":navigator.userAgent.match(/iPhone/i)?"IPHONE":navigator.userAgent.match(/iPad/i)?"IPAD":navigator.userAgent.match(/iPod/i)?"IPOD":navigator.userAgent.match(/BlackBerry/i)?"BLACKBERRY":navigator.userAgent.match(/Windows Phone/i)?"WINDOWSPHONE":"DESKTOP"}init(),window.onfocus=function(){$.ajax({type:"GET",url:baseURL+"/api/user/status?getUserData=true"}).done(successLogin.bind(null,!0)).fail(failLogin)};var emailRegex=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;function iosAppDownload(){swal({title:"Beta Invite!",text:"Write your email address so we can send you an invite",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Email"},function(n){return!1!==n&&(""===n?(swal.showInputError("You need to write email!"),!1):emailRegex.test(n)?void sendEmail({name:"IOS App Request",email:n,subject:"IOS App Request",message:"IOS App Request",emailSubject:"IOS App Request: "+n}).done(function(n){swal("Awesome!","We will send you the invite soon!","success")}).fail(function(n){console.log(n)}):(swal.showInputError("Invalid email!"),!1))})}function sendMessage(){var t=document.getElementById("name"),e=document.getElementById("email"),o=document.getElementById("subject"),i=document.getElementById("message");e&&emailRegex.test(e.value)&&i.value?(document.getElementById("send-message-error").style.display="none",sendEmail({name:t.value,email:e.value,subject:o.value,message:i.value}).done(function(n){t.value="",e.value="",o.value="",i.value="",document.getElementById("send-message-success").style.display="block"}).fail(function(n){console.log(n)})):document.getElementById("send-message-error").style.display="block"}function sendEmail(n){return $.ajax({type:"POST",url:baseURL+"/api/utility/email",data:n})}